// Licenced under MIT - castrato - Â©2014 Pehr Boman <github.com/unkelpehr>
(function(e,f){"function"===typeof define&&define.amd?define([],f()):"object"===typeof exports?module.exports=f:e.castrato=f})(this,function(){function e(d,b,a,c){var g=[d,a,1<a.length];(k[b]||(k[b]=[])).push(g);if(m[b])for(d=0,g=[g];(a=m[b][d++])&&(l(0,0,a[0],a[1],g),!c););}function f(d,b,a){var c=0;if(toSubs=k[b])for(;b=toSubs[c++];)b[0]!==d||a&&a!==b[1]||toSubs.splice(--c,1)}function l(d,b,a,c,g){var h=g||k[b]||[],f=h.length,n,e,p=[],l;k["*"]&&(h=h.concat(k["*"]));if(e=n=h.length)for(l=c?function(a){a&&
p.push(a);--n||(c(p,f),c=0)}:q;g=h[--e];)g[1](a,g[2]?l:n--,b);!n&&c&&c(p,f);d&&(m[b]||(m[b]=[])).push([a,c])}var r=0,k={},m={},q=function(){};return function(d){var b=r++;d=d||{};d.emit=function(a,c,b,d){!0!==a&&!1!==a&&(d=b,b=c,c=a,a=!1);l(a,c,b,d);return this};d.on=function(a,c){e(b,a,c);return this};d.once=function(a,c){e(b,a,function h(d,e){f(b,a,h);c(d,1<c.length?e:e())},!0);return this};d.off=function(a,c){f(b,a,c);return this}}}());
